/**
 * @file
 * Positioning for responsive layout .
 *
 * Define CSS classes to create a table-free, 3-column, 2-column, or single
 * column layout depending on whether blocks are enabled in the left or right
 * columns.
 *
 * This layout uses the Zen Grids plugin for Compass: http://zengrids.com
 */

@import "base";

//Create and import our sprite sheet for the icons used in the right footer block
@import "../images/westernIcons/*.png";
@include all-westernIcons-sprites;

@mixin nav-icons($fileName) {
    background-image:url("../../images/icons/#{$fileName}.png");
}

@font-face {
  font-family: 'fontello';
  src: url("../../font/fontello.eot?84055489");
  src: url("../../font/fontello.eot?84055489#iefix") format('embedded-opentype'), url("../../font/fontello.woff?84055489") format('woff'), url("../../font/fontello.ttf?84055489") format('truetype'), url("../../font/fontello.svg?84055489#fontello") format('svg');
  font-weight: normal;
  font-style: normal;
}

$zen-column-count:  12;
$zen-gutter-width:  30px;


// IE6-7 don't support box-sizing: border-box. We can fix this in 1 of 3 ways:
// - Drop support for IE 6/7. :-) In the _base.scss, set $legacy-support-for-ie6
//   and $legacy-support-for-ie7 to false.
// - (Preferred) Install the box-sizing polyfill and set the variable below to
//   the absolute path URL to the boxsizing.htc file.
//   @see https://github.com/Schepp/box-sizing-polyfill
     $box-sizing-polyfill-path: "/sites/all/themes/wwuzen/js/boxsizing.htc";
// - Use the same CSS unit for grid width and gutter width (use px for both or
//   use % for both, etc.) and set the box-sizing variable to content-box.
//   $zen-box-sizing: content-box;


// You can generate more efficient CSS if you manually apply the
// zen-grid-item-base mixin to all grid items from within a single ruleset.
$zen-auto-include-item-base: false;
// $zen-auto-include-flow-item-base: false;


/* ****************************************************
        Generic Styles regardless of screen size
**************************************************** */

/*
 * Center the page.
 */

.page,
.region-bottom {
  /* For screen sizes larger than 1200px, prevent excessively long lines of text
     by setting a max-width. */
  margin-left: auto;
  margin-right: auto;
  max-width: 1080px;
}

/*
 * Containers for grid items and flow items.
 */

.page,
footer {
  @include zen-grid-container();
}

/*
 * Apply the shared properties of grid items in a single, efficient ruleset.
 */
// See the note about $zen-auto-include-item-base above.

.page, .western-header, .college-header,
main, .content, .main-nav, .region-sidebar-first, .region-sidebar-second,
footer {
  @include zen-grid-item-base();
  padding-left:0px;
  padding-right:0px;
}

.footer-right {
  .western-social-media {
    li { list-style: none; display:inline-block;}
      a {
        width:24px;
        height:24px;
        display: block;
        text-indent: -999em;
      }
  }
    //Set the default styles for the p content in the right footer block
    p {
      position:relative;
      padding-left:2em;
      &:before{
        position:absolute;
        top:0.5em;
        left:0;
        content:" ";
      }
    }
    .western-address {
      &:before {
        @extend .westernIcons-AddressIcon;
        width:14px;
        height:12px;
        margin-top:-1px;
      }
    }
    .western-telephone {
      &:before {
        @extend .westernIcons-PhoneIcon;
        width:12px;
        height:10px;
      }
    }
    .western-contact {
      &:before {
        @extend .westernIcons-EmailIcon;
        width:11px;
        height:8px;
        margin-left:1px;
        margin-top:2px;
      }
    }
}

/* ****************************************************
                Mobile-size -> 360px
**************************************************** */

@media all and (max-width:360px) {
  $zen-column-count: 1;
  .western-header .western-search .western-search-widget {
    width:16em;
    @include transition(width .25s);
    .form-submit { border-left: solid 1.75em white; box-shadow:none; }
  }

  .content article {
    figure {
      margin:0 auto;
      float:none !important;
      display:block;
    }
    blockquote {
      max-width:100%;
      margin:.5em;
    }
  }
}

/* ****************************************************
                Smaller Screens 0px --> 800px
**************************************************** */

@media all and (max-width: 800px) {
.western-header {
  background-color:$wwuBlue;
  //height:68px;
  .western-logo a {
    @include zen-grid-item(1,1,left);
    margin-bottom:-.375em;
    background: url('../../images/wwuhorizlogo.png') no-repeat;
    width: 100%;
    height: 74px;
  }
  .western-quick-links {
    float:right;
    background-color:rgb(75, 104, 156);
    height:100%;
    padding:0;
    margin:0;
    width:44px;
    height:44 * 3px;
    position:absolute;
    top:0;
    right:0;
    z-index:200;
    @include box-shadow(-5px 0 15px -5px #333);
    button { display:none; }
  }
  .western-search {
    @include zen-clear(right);
    @include zen-grid-item(1,1,right);
    z-index: 200;
    background-color:rgb(75, 104, 156);
    top:0;
    > button { background-image:url('../images/icons/search-gray.png'); }
    .western-search-widget {
      @include zen-clear(right);
      display:none;
      position:absolute;
      width:19em;
      top:68px;
      right:44px;
      z-index:100;
      margin-top:0;
      @include transition(width .25s);
    }
  } // End .wwusearch
  %icon-size { // Use for @extends
    height:44px;
    width:44px;
    position:absolute;
    right:0;
    z-index:200;
    cursor:pointer;
  }
  .mobile-main-nav {
    @include zen-clear(right);
    @include zen-grid-item(1,1,right);
    background-color:$wwuOceanBlue;
    width:2.75em;
  }
  ul {
    margin: 0;
    padding:.5em;
    background-color:#fff;
    list-style-type:none;
    position:absolute;
    width:19em;
    height:55px;
    right:44px;
    top:0;
    display:none;
    overflow:hidden;
    @include box-shadow(#333 0 0 8px);
    li {
      text-align:center;
      display:inline-block;
      padding:.17em .25em 0 .25em;
      &:not(:first-child):before { content:""; }
      //&:nth-child(4) { padding:.17em .5em 0 .5em; }
      a {
        text-decoration:none;
        text-transform:none;
        @include transition(1s);
        padding:0;
        span:first-child {
          font-size:1.825em;
          font-family: 'fontello';
          font-style: normal;
          font-weight: normal;
          speak: none;
          display: inline-block;
          text-decoration: inherit;
          padding:0;
          font-variant: normal;
          text-transform: none;
          line-height: 1em;
          @include transition(.2s);
        }
        span:last-child {
          display:block;
          font-size:.75em;
        }
        &:hover, &:focus {
          color:$wwuGreen;
          @include transition(.2s);
          span:first-child { color:$wwuLime; }
        }
      } // End a
    } // End li
  } // End ul
} // End .western-header
.college-banner { display:none; }
.college-name {
  background-image:none;
  @include zen-clear();
  z-index:-10;
  background-color:$wwuOceanBlue;
  @include background(linear-gradient(top, lighten($wwuOceanBlue, 10%), $wwuOceanBlue));
  @include zen-grid-item(1,1);
  padding: 0 0 .5em 1.25em;
  font-family:$muli;
  p {
    margin:0.4em 0 0 0;
    display:block; //college name is shown as part of image on banner
    width:80%; //Prevents the name from sliding under the mobile nav at 360px wide
    font-size:1.25em;
    text-align:left;
    padding:0;
      a:link,
      a:visited {
        color: #fff;
        text-decoration: none;
      }
  }
  .main-nav {
    padding:0;
    height:100%;
    .menu {
      display:none;
      background-color:#E9E9E9;
      list-style-type:none;
      a {
        text-decoration:none;
        color:#fff;
        padding: .7em 0 .65em 1em;
        display:block;
        width:83%;
        @include transition(1s);
        &:hover, &:focus {
          color:$wwuLime;
          @include transition(.2s);
        }
      }
      li {
        width: 100%;
        text-align: left;
        display:block;
        background-color:$wwuBlue;
        margin-bottom:1px;
        border:none;
        text-transform:none;
        font-size:.9em;
        padding-top:0;
        padding-bottom:0;
        @include transition(.25s);
        ul {
          padding-left:0;
          position: relative;
          background-color:#E9E9E9;
          li {
            background-color:$wwuGrayBlue;
            margin-bottom:1px;
            border:none;
            font-size:1em;
            ul li {
              background-color:tint($wwuGrayBlue, 20%);
              ul li {
                background-color:tint($wwuGrayBlue, 40%);
              }
            }
          } // End li
        } // End ul
      } // End li
      li.expanded .menu li { display: none; }
    } // End .menu
  } // End .main-nav

@mixin nav-icons($fileName) { background-image:url("../../images/icons/#{$fileName}.png"); }

.expanded { @include nav-icons(expandable-parent); }
  .opened { @include nav-icons(opened-parent); }

.expanded, .opened {
  background-repeat: no-repeat;
  background-position:right top;
  background-size:44px 44px;

    .expanded { @include nav-icons(expandable-first-child); }
    .opened { @include nav-icons(opened-first-child); }

    .expanded, .opened {
      .expanded { @include nav-icons(expandable-grandchild); }
      .opened { @include nav-icons(opened-grandchild); }

      .expanded, .opened {
        .expanded { @include nav-icons(expandable-great-grandchild); }
        .opened { @include nav-icons(opened-great-grandchild); }
        }
      }
    } // End .expanded, .opened
  } //End college header

main {
  @include zen-clear();
  //@include zen-grid-item(1,1, right);
  margin-top:0em;
  .page-title {
    border-bottom:none;
    padding:.9em 0 1em 0;
    margin-bottom:0em;
  }
  .breadcrumb { display: none; }
} // End #main

//Hide the navigation that moves to the bottom of the page.
#block-accordion-menu-1 { display:none; }
footer { @include zen-clear(both); }

.footer-left {
  @include zen-clear();
  padding-left:1em;
  p:first-child, .footer-site-name {
    text-align:center;
  }
}
.footer-center {
  @include zen-clear();
  position: relative;
  //margin-left:-.5em;
  padding: 0;
  .menu {
    padding: 0 0 0 15px;
    li {
      font-size:.875em;
      display: block;
    }
  }
}
.footer-right {
  @include zen-clear();
  margin-top:0em;
  h1 {
        text-align:left;
    a {
    padding-left:1em;
    }
  }
  .western-contact-info {
    padding-top:1em;
  }
  .western-social-media {
    padding-left:.5em;
  }
}

  #edit-subject { width: 100%; } // Override of normalize.scss for the comment subject input area
}


/* ****************************************************
            Phone and tablet size 0px <--> 800px
**************************************************** */
@media all and (max-width:800px) {
  //The left column in layouts needs to float above the main content. These classes are applied in panels.
  .left-column {
    float:left;
    width: 100%;
  }
  .right-column {
    clear:left;
    width:100%;
  }
}


/* ****************************************************
                Screens 801px ->
**************************************************** */

@media all and (min-width: 801px) {
  // Use 12 grid columns for larger screens.
  $zen-column-count: 12;

  .main-nav ul li { float:none; }
  body { border-top:solid 6px $wwuLtblue; }
  header[role="banner"] > div {
    max-height: 247px;
    overflow:hidden;
    border:solid 10px #fff;
    position:relative;
    background:#fff;
    @include box-sizing(border-box);
    margin-top: 50px;
  }
  .western-header {
    @include zen-grid-item(12,1);
    margin-bottom:.563em;
    margin-top: -131px;
    .western-logo {
      margin:0;
      a {
        display:block;
        z-index:200;
        margin: 69px 0 0 20px;
        position:relative;
        @include hide-text-bg-img;
        background: url('../../images/wwu.png') no-repeat;
        width: 240px;
        height: 135px;
      }
    }
    nav {
      position: relative;
      top: -7.1em;
      width: 100%;
    }
    .western-search {
      top: -.7em;
      display: block;
      position: absolute;
      right: 6.6%;
      > button {
        top:44px;
        height:44px;
        width:44px;
        cursor:pointer;
        background:url('../../images/icons/search.png') no-repeat;
        background-size:cover;
        filter: progid:DXImageTransform.Microsoft.AlphaImageLoader( src='/sites/all/themes/wwuzen/images/icons/search.png', sizingMethod='scale');
        -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader( src='/sites/all/themes/wwuzen/images/icons/search.png', sizingMethod='scale')";
        @include hide-text-bg-img;
      }
      .western-search-widget {
        position:absolute;
        top:44px;
        right:0;
        margin-top:0;
        display:none;
      }
    }
    .western-quick-links {
        position:absolute;
        top:-.1em;
        right:15.4%;
      ul {
        @include transition(.5s);
      }
      > button { display:none; }
    }
    .mobile-main-nav { display:none; }
  } // End .western-header
  .college-header {
    @include zen-clear(both);
    @include zen-float(left);
    > a {
      display:block;
      width:100%;
      height:100%;
    }
    .college-name {
      position: absolute;
      right: -2px;
      bottom: 44px;
      background-color:$wwuOceanBlue; /* Fallback for older browsers */
      background-color:rgba($wwuOceanBlue, .8);
      p { margin:0; }
    }
  } // End #header
  .main-nav div div .menu li ul { display:none; }
  .main-nav div div .menu li { float:none; }
  main {
    @include zen-clear();
    @include zen-grid-item(12,1);
    width:100%;
    margin: 0.5em 0em 4.250em 0em;
    .page-title { border-bottom:solid 3px #E9E9E9; }
  } // End #main

  //.main-nav { @include zen-grid-item(12,1); } //The layout when there is only one sidebar, the left one.
  .sidebar-first {
    .content { @include zen-grid-item(8.75, 4.25); } // Span 4 columns, starting in 2nd column from left.
    #block-accordion-menu-1{ display:block; } //Show the sidebar navigation
    .region-sidebar-first {  @include zen-grid-item(3, 1); } // Span 1 column, starting in 1st column from left.
  } // End .sidebar-first
  footer { @include zen-clear(both); }
  .footer-left {
    @include zen-grid-item(3.25,1.5);
  }
  .footer-center {
    //position:relative;
    @include zen-grid-item(3.5,4.75);
    ul.menu li {
      list-style-image: none;
      list-style-type: none;
    }
  }
   // End .footer-center
  .footer-right {
    @include zen-grid-item(3.75,8.5);
    margin-top:-.5em;
    margin-right:2em;
    h1 {
      position: relative;
      top: -1.2em;
      padding-top: 0.8em;
      margin:0;
      font-weight:normal;
      text-align:center;
    }
  }
}
